/* Top-tabs modern theme â€” wider content */

:root{
  /* glass theme as default */
  --bg: linear-gradient(180deg,#eff8ff,#ffffff);
  --surface: rgba(255,255,255,0.65);
  --text: #0b1320;
  --muted: #475569;
  --meta: #6b7280;
  --accent: #06b6d4;
  --border: rgba(6,182,212,0.10);

  --radius: 12px;
  --maxw:1200px;
  --pad:1.2rem;
  font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  color-scheme: light dark;
}

/* Typography improvements */
html { font-size: 16px; }
body { font-size: 1rem; line-height: 1.6; -webkit-font-smoothing: antialiased; }
h1,h2,h3 { color: var(--text); margin-top: 0; font-weight:700; line-height:1.2 }
h2 { font-size: 1.35rem; margin-bottom: .5rem; }
h3 { font-size: 1.05rem; margin-bottom: .35rem; color: var(--muted); font-weight:600 }

/* layout */
*{box-sizing:border-box}
html,body{height:100%}
html { color-scheme: light dark; }

/* remove page gradient and use a stable background color */
body{
  /* background: linear-gradient(180deg,#f7fbff,#eef6ff); */
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition: background-color 0.25s ease, color 0.25s ease;
  -webkit-text-size-adjust: 100%;
  -webkit-print-color-adjust: exact;
  color-adjust: exact;
}

/* header */
.site-header{background:transparent;position:sticky;top:0;z-index:40;backdrop-filter: blur(6px);padding-top:.6rem;padding-bottom:.35rem}
.header-row{display:flex;align-items:center;justify-content:space-between;gap:12px}
.brand-link{font-weight:700;color:var(--text);text-decoration:none;font-size:1.1rem}
.brand-sub{font-size:.9rem;color:var(--muted)}

/* top tabs */
.top-tabs{display:flex;gap:.5rem;justify-content:center;margin-top:.6rem;padding:0 8px}
.top-tabs [role="tab"]{
  background:transparent;border:0;padding:.6rem .95rem;border-radius:999px;cursor:pointer;font-weight:600;color:var(--muted);
  transition:transform .12s ease, background .12s ease, color .12s ease;
}
.top-tabs [role="tab"][aria-selected="true"]{
  color:white;background:var(--accent);transform:none;box-shadow:0 8px 24px rgba(37,99,235,0.14);
  border: 1px solid rgba(0,0,0,0.06);
}

/* panels */
.panel{margin-top:1rem;background:var(--card);padding:1.15rem;border-radius:12px;border:1px solid rgba(15,23,42,0.04);box-shadow:0 12px 30px rgba(11,15,30,0.05)}
.panel h1{margin-top:0}
.panel-grid{display:grid;grid-template-columns:220px 1fr;gap:1rem;align-items:start}

/* update panel and avatar to use semantic radii and shadows */
.panel{ border-radius:var(--radius); box-shadow:var(--shadow); background:var(--surface-1); border:1px solid var(--border); }
.avatar{ width:200px;height:200px;border-radius: calc(var(--radius) - 2px);border:1px solid rgba(15,23,42,0.06);box-shadow:0 10px 30px rgba(11,15,30,0.06);}

/* avatar ring in dark mode */
@media (prefers-color-scheme: dark) {
  .avatar{ box-shadow: 0 6px 18px rgba(0,0,0,0.6); border-color: rgba(255,255,255,0.05); }
}

/* quick links */
.quick-links a{color:var(--accent);text-decoration:none;margin-right:.6rem}

/* publications grid */
.pub-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin-top:.6rem}
.pub-card{padding:1rem;border-radius:10px;background:linear-gradient(180deg,#fff,#fbfdff);border:1px solid rgba(15,23,42,0.04);box-shadow:0 8px 20px rgba(11,15,30,0.04)}

/* Publications controls */
.pub-controls {
  display:flex;
  gap:.6rem;
  align-items:center;
  margin: 0.6rem 0 0.9rem;
  flex-wrap:wrap;
}
.pub-controls input[type="search"]{
  flex:1 1 280px;
  min-width:160px;
  padding:.5rem .75rem;
  border-radius:8px;
  border:1px solid var(--border);
  background: rgba(255,255,255,0.85);
  color:var(--text);
}
.pub-controls select {
  padding:.45rem .6rem;
  border-radius:8px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  font-weight:600;
}
.pub-controls button {
  padding:.45rem .7rem;
  border-radius:8px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  cursor:pointer;
  font-weight:600;
}
.pub-controls button[aria-pressed="true"] { background:var(--accent); color:#fff; }

/* No results */
.no-results { color: var(--muted); margin: 0.6rem 0; }

/* Card view */
#panel-pubs.card-view .pub-compact-list {
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(300px,1fr));
  gap:1rem;
}
#panel-pubs.card-view .pub-item {
  background: var(--surface);
  padding: .9rem 1rem;
  border-radius: 10px;
  box-shadow: 0 8px 20px rgba(11,15,30,0.04);
  border: 1px solid var(--border);
  margin:0;
}

/* clickable pub line (keyboard focusable) */
.pub-line { cursor:pointer; position:relative; display:block; }
.pub-line[role="button"] { outline: none; }
.pub-line:focus-visible { box-shadow: 0 0 0 4px rgba(6,182,212,0.12); border-radius:6px; }

/* abstracts collapse/expand */
.pub-abstract { transition: max-height .22s ease, opacity .22s ease; overflow:hidden; max-height:2000px; opacity:1; margin-top:0.35rem; }
.pub-abstract.collapsed { max-height:0; opacity:0; margin-top:0; padding-top:0; }

/* hover/focus affordances */
.pub-item:hover, .pub-item:focus-within { transform: translateY(-2px); }

/* small screens: collapse abstracts by default */
@media (max-width:720px){
  .pub-abstract { max-height:0; opacity:0; }
  .pub-abstract.collapsed { max-height:0; }
  .pub-abstract.expanded { max-height:2000px; opacity:1; }
}

/* Skip to content link for accessibility */
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 0;
  background: #003366;
  color: white;
  padding: 8px;
  text-decoration: none;
  z-index: 100;
}

.skip-to-content:focus {
  top: 0;
}

/* keyboard focus styles (accessible) */
:focus { outline: none; }
:focus-visible { outline: 3px solid var(--focus-ring); outline-offset: 3px; border-radius: 6px; }
.top-tabs [role="tab"]:focus-visible { outline-offset: 3px; border-radius: 999px; }

/* links and strong emphasis */
a { color: var(--accent); text-decoration: underline; text-decoration-thickness: from-font; }
a:focus-visible { box-shadow: 0 0 0 4px rgba(37,99,235,0.08); border-radius: 6px; }

/* subtle lift on interactive cards */
.pub-card, .panel { transition: transform .18s cubic-bezier(.22,.9,.35,1), box-shadow .18s ease; }
.pub-card:hover, .panel:hover { transform: translateY(-4px); box-shadow: 0 18px 40px rgba(2,6,23,0.08); }

/* news badges and list */
ul.news-list, ul.news-list li { list-style: none; padding: 0; margin: 0; }
.news-list li { padding: .25rem 0; display:flex; gap:0.6rem; align-items:flex-start; color:var(--muted); }
.news-list li::before { content: "ðŸ”¹"; display:inline-block; width:1.2rem; }

/* back-to-top utility (add JS to toggle) */
.back-to-top {
  position: fixed; right: 1rem; bottom: 1.25rem; background: var(--accent); color: white;
  width: 44px; height: 44px; border-radius: 999px; display:grid; place-items:center; box-shadow: 0 8px 22px rgba(2,6,23,0.22);
  opacity: 0.95; transition: transform .18s ease, opacity .18s ease; z-index:1000;
}
.back-to-top:focus-visible { transform: translateY(-2px); }

/* accessible helper */
.visually-hidden {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0;
}

/* Panels forced to use surface + readable text (prevents UA forced-dark issues) */
body { background: var(--bg); color: var(--text); }
.panel { background: var(--surface); color: var(--text); border: 1px solid var(--border); }

/* responsive */
@media (max-width:980px){
  .panel-grid{grid-template-columns:140px 1fr}
  .avatar{width:140px;height:140px}
}
@media (max-width:720px){
  .panel-grid{grid-template-columns:1fr;grid-auto-rows:min-content}
  .avatar{width:120px;height:120px;margin:0 auto;display:block}
  .top-tabs{justify-content:flex-start;overflow:auto;padding-left:8px}
  .wrap{padding:12px}
}
@media (max-width: 768px) {
  .top-tabs {
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .top-tabs button {
    font-size: 0.9rem;
    padding: 0.6rem 0.8rem;
  }
  
  .panel-grid {
    grid-template-columns: 1fr;
  }
  
  .avatar {
    max-width: 150px;
  }
}

/* Color scheme support */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #071024;
    --surface: #071125;
    --text: #e6eef8;
    --muted: #93a4bf;
    --meta: #89a0c0;
    --accent: #66b3ff;
    --border: rgba(255,255,255,0.06);
  }
}

/* ensure panels have explicit surface + text colors (prevents forced/auto-dark pitfalls) */
.panel {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  box-shadow: 0 10px 30px rgba(2,6,23,0.06);
  /* prevent some UA forced color changes */
  forced-color-adjust: none;
  -webkit-text-fill-color: var(--text);
}

/* ensure all panel children inherit correct text color */
.panel, .panel * {
  color: var(--text);
}

/* Improve contact list alignment */
.contact-list {
  list-style: none;
  padding: 0;
}

.contact-list li {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 1rem;
  padding: 0.5rem 0;
}

.contact-list .icon {
  flex-shrink: 0;
  margin-top: 2px;
  color: var(--accent);
  -webkit-text-fill-color: var(--accent);
}

/* Lazy load images */
img[loading="lazy"] {
  background-color: var(--color-code-bg);
}

/* Improve readability */
a {
  color: var(--color-accent);
  transition: opacity 0.2s ease;
}

a:hover {
  opacity: 0.8;
}

/* Better print styles */
@media print {
  .top-tabs,
  .site-header nav,
  .skip-to-content {
    display: none;
  }
  
  body {
    color: #000;
    background: white;
  }
}

/* reduced motion user preference */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
  .pub-card:hover, .panel:hover { transform: none; box-shadow: var(--shadow); }
}

/* small responsive type tweak for narrow screens */
@media (max-width:720px) {
  h2 { font-size: 1.15rem; }
  body { font-size: 0.98rem; }
}

/* If needed: small fallback for publication summary color (keeps consistent look) */
.pub-summary { color: var(--muted); }
